<script type="text/html" data-template-name="gapit-snmp">
    <div class="form-row">
        <label for="node-input-host"><i class="fa fa-globe"></i> Host</label>
        <input type="text" id="node-input-host" placeholder="ip address(:optional port)">
    </div>
    <div class="form-row">
        <label for="node-input-community"><i class="fa fa-user"></i> Community</label>
        <input type="text" id="node-input-community" placeholder="public">
    </div>
    <div class="form-row">
        <label for="node-input-version"><i class="fa fa-bookmark"></i> Version</label>
        <select type="text" id="node-input-version" style="width:150px;">
            <option value="1">v1</option>
            <option value="2c">v2c</option>
        </select>
        <span style="margin-left:50px;">Timeout</span>
        <input type="text" id="node-input-timeout" placeholder="secs" style="width:50px; direction:rtl; vertical-align:baseline;">&nbsp;S
    </div>
    <div class="form-row">
        <label for="node-input-gapit_code"><i class="fa fa-file-code-o"></i> Gapit code</label>
        <input type="text" id="node-input-gapit_code" placeholder="e.g. 1.3.6.1.2.1.1.5.0" />
    </div>
    <div class="form-row">
        <label for="node-input-skip_nonexistent_oids"><i class="fa fa-remove"></i> Skip nonexistent OIDs in subsequent queries</label>
        <input type="checkbox" id="node-input-skip_nonexistent_oids" />
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="gapit-snmp">
    <p>Simple SNMP oid or oid list fetcher. Triggered by any input.</p>
    <p><code>msg.host</code> may contain the host.</p>
    <p><code>msg.community</code> may contain the community.</p>
    <p>OIDs must be numeric. iso. is the same a 1. </p>
    <p>The node will output <code>msg.payload</code> and <code>msg.oid</code>.</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('gapit-snmp', {
        category: 'network-input',
        color: "YellowGreen",
        defaults: {
            host: { value: "127.0.0.1" },
            community: { value: "public" },
            version: { value: "1", required: true },
            gapit_code: { value: "" },
            skip_nonexistent_oids: { value: true },
            timeout: { value: 5 },
            name: { value: "" }
        },
        inputs: 1,
        outputs: 1,
        icon: "snmp.png",
        label: function () {
            return this.name || "gapit-snmp " + this.host;
        },
        labelStyle: function () {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function () {
            $("#node-input-gapit_code").typedInput({
                type:"json",
                types:["json"]
            })
        },
    });
</script>
